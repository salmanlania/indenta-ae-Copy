(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5589],{73754:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chatbot",function(){return i(33092)}])},33092:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var s=i(85893),a=i(67294),n=i(86455),r=i.n(n),l=i(77630),o=i.n(l),d={src:"/_next/static/media/ayesha.ff2a3c46.png",height:1306,width:1306,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABB0lEQVR42mMAgTtntmjeO7Xp0JZlk39tXDLx1+3j6w89vbpXEyx548RGzfunN71bOaPlf6GPyf8kc5n/kxpy/984vOrdvfM7NBluAlVfO7jif4iz5c9N3QX/F5XH/Afq+7lrUef/Oyc3HGK4dWzdr8Nrp/+PdTD4f2FB4/8ZmUH/RRgY/q+eXAsy5RfDw3Pbfu1Y3APS9X9+gf//RBstMHtCRcr/m0fW/GJ4fGHHoVXTm8HGrqyP+T+/JAjM7ixN/n/v9KZDDB/uHNLctXraO08fj/+rGqL/7+9L+e/tav9/z5rp7z7dPwrxyf+XZzXP7Vtx6MTGGb8u7Zz768ze5Yf+vjgNlgQA9W2Ya4qssMIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},c=i(25675),u=i.n(c),m=i(3528),p=i(87066);let g=o()(r());var f=()=>{let[e,t]=(0,a.useState)([]),[i,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),[c,f]=(0,a.useState)(null),[h,b]=(0,a.useState)(""),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("session_id");if(e){f(e);return}try{let e=await g.fire({title:"Welcome",html:'<input type="email" id="email" class="swal2-input" placeholder="Enter your email" required>',confirmButtonText:"Continue",allowOutsideClick:!1,allowEscapeKey:!1,preConfirm:()=>{let e=r().getPopup().querySelector("#email").value;return e&&e.includes("@")&&e.includes(".")?(b(e),e):(r().showValidationMessage("Please enter a valid email address"),!1)}});if(e.isConfirmed){let t=e.value,i=await p.Z.post("https://chat.indenta.ai/init-session/",{email:t},{headers:{Accept:"application/json","Content-Type":"application/json"}});if(200===i.status){let e=i.data.session_id;f(e),localStorage.setItem("session_id",e)}else throw Error("Failed to fetch session ID")}}catch(e){console.error("Error initializing session:",e.message),r().fire("Error","Failed to initialize session. Please try again later.","error")}})()},[]);let x=async()=>{if(i.trim()){t([...e,{sender:"user",text:i}]),n(""),o(!0);try{let e=localStorage.getItem("session_id");console.log("bot session",e);let s=await p.Z.post("https://chat.indenta.ai/message/",{message:i,session_id:e},{headers:{Accept:"application/json","Content-Type":"application/json"}});if(200===s.status){let e=s.data.response;t(t=>[...t,{sender:"bot",text:e}])}else throw Error("Failed to send message")}catch(e){console.error("Error sending message:",e),t(e=>[...e,{sender:"bot",text:"Something went wrong, try again later!"}])}finally{o(!1)}}},w=()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,a.useEffect)(()=>{w()},[e]),(0,a.useEffect)(()=>{t([{sender:"bot",text:'\n      Hello! I\'m Ayesha,\n      <br /><br />As a valued customer, we are eager to inform you about a special credit offer exclusively for you. We are proposing an opportunity to enhance your purchasing power and enjoy a more flexible shopping experience.<br />Here are the details of your special credit offer:<br /><br /><b style="font-size : 16px ">•</b> Credit Limit: Up to 4 Multiple of your salary\n      <br /><b style="font-size : 16px ">•</b> NO Interest % on BT and EPP<br /><b style="font-size : 16px ">•</b> Airport lounge access for you through Lounge Key<br /><b style="font-size : 16px ">•</b> Access to a digital concierge channel in addition to telephone and email service<br /><b style="font-size : 16px ">•</b> 50% off on movie tickets at Novo, Reel & VOX cinemas<br /><b style="font-size : 16px ">•</b> Complimentary valet parking service across 30 locations<br /><b style="font-size : 16px ">•</b> Spend AED 500 for an entry into the lucky draw of AED 100,000 every week!<br /><b style="font-size : 16px ">•</b> No annual fees on Credit cards<br /><br />\n      <div class="softButtons" style="display: flex;justify-content: space-around;flex-wrap: wrap;">\n        <ul style="list-style-type: disclosure-closed;font-weight : 550">\n          <li id="cbdOne">CBD One</li>\n          <li id="platinum">CBD Smiles Visa Platinum</li>\n          <li id="signature">CBD Smiles Visa Signature</li>\n          <li id="reward">CBD Yes Rewards Credit Card</li>\n        </ul>\n        <ul style="list-style-type: disclosure-closed;font-weight : 550">\n          <li id="superSaver">Super Saver Visa Signature</li>\n          <li id="visaPlatinum">Visa Platinum</li>\n          <li id="infinite">Visa Infinite</li>\n        </ul>\n      </div>\n    '}])},[]),(0,a.useEffect)(()=>{let e=(e,t,i)=>{g.fire({html:"\n          <div>\n            ".concat(t?'<img src="'.concat(t,'" alt="Offer Image" style="width: 100%; max-height: 450px; height: auto; max-width: 450px;" />'):"","\n            <p>").concat(e,"</p>\n            ").concat(i?'<a href="'.concat(i,'" target="_blank" style="color : black;color: black; font-size: 15px; text-decoration: underline;">Click here for more details</a>'):"","\n          </div>\n        "),confirmButtonText:"OK"})},t=[{id:"cbdOne",message:"Details about CBD One",imageUrl:"",link:"https://www.cbd.ae/cbdnowcm/Products-v3/cbd-one-credit-card"},{id:"platinum",message:"Details about CBD Smiles Visa Platinum",imageUrl:"",link:"https://www.cbd.ae/cbdnowcm/Products-v3/Visa-Platinum"},{id:"signature",message:"Details about CBD Smiles Visa Signature",imageUrl:"/assets/img/pics/cp.JPG"},{id:"reward",message:"Details about CBD Yes Rewards Credit Card",imageUrl:"/assets/img/pics/cp2.jpg"},{id:"superSaver",message:"Details about Super Saver Visa Signature",imageUrl:"",link:"https://www.cbd.ae/cbdnowcm/Products-v3/super-saver-credit-card"},{id:"visaPlatinum",message:"Details about Visa Platinum",imageUrl:"/assets/img/pics/cp3.jpg"},{id:"infinite",message:"Details about Visa Infinite",imageUrl:"/assets/img/pics/S2.jpg"}];return t.forEach(t=>{let i=document.getElementById(t.id);i&&i.addEventListener("click",()=>e(t.message,t.imageUrl,t.link))}),()=>{t.forEach(t=>{let i=document.getElementById(t.id);i&&i.removeEventListener("click",()=>e(t.message,t.imageUrl,t.link))})}},[e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{height:"100vh"},className:"d-flex bg-light",children:(0,s.jsxs)("div",{className:"d-flex flex-column flex-grow-1",children:[(0,s.jsxs)("div",{className:"p-3 bg-white border-bottom d-flex align-items-center",style:{position:"fixed",width:"100%"},children:[(0,s.jsx)(u(),{src:d,alt:"Bot",width:60,height:60,style:{borderRadius:"50%"}}),(0,s.jsxs)("div",{className:"ms-3",children:[(0,s.jsx)("div",{className:"fw-semibold",children:"Ayesha"}),(0,s.jsxs)("div",{className:"text-muted small",style:{display:"inline-block"},children:[(0,s.jsx)("span",{style:{height:"15px",width:"15px",backgroundColor:"green",borderRadius:"50%",display:"inline-block",marginTop:"2.6px",marginRight:"2px"}}),(0,s.jsx)("span",{children:"Active Now"})]})]})]}),(0,s.jsxs)("div",{className:"flex-grow-1 p-4 overflow-auto",style:{marginTop:"5rem"},children:[e.map((e,t)=>(0,s.jsx)("div",{className:"d-flex ".concat("user"===e.sender?"justify-content-end":""," mb-3"),style:{marginLeft:"user"===e.sender?"auto":"0",width:"50%"},children:"bot"===e.sender?(0,s.jsx)("div",{className:"p-2 rounded bg-light border",dangerouslySetInnerHTML:{__html:e.text}}):(0,s.jsx)("div",{className:"p-2 rounded bg-primary text-white",children:e.text})},t)),(0,s.jsx)("div",{ref:y}),l&&(0,s.jsx)("div",{className:"text-muted mt-2",style:{marginRight:"auto"},children:"typing"})]}),(0,s.jsxs)("div",{className:"p-4 bg-white border-top d-flex align-items-center",children:[(0,s.jsx)("input",{type:"text",placeholder:"Type a message...",className:"form-control flex-grow-1",value:i,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key&&x()},disabled:l}),(0,s.jsx)("button",{className:"btn btn-primary ms-2",onClick:x,disabled:l,children:(0,s.jsx)(m.Z,{})})]})]})})})};function h(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f,{})})}}},function(e){e.O(0,[8166,6273,2888,9774,179],function(){return e(e.s=73754)}),_N_E=e.O()}]);